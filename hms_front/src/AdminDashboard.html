<!DOCTYPE html>

<html lang="en" class="app">

<head>
    <meta charset="utf-8" />
    <title>HMS</title>
    <meta name="description" content="Dashboard of the HMS Applicaiton." />
    <meta name="author" content="Parth Kinjal Shah" />
    <meta name="Copyright" content="Parth Kinjal Shah 2018" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="CSS/app.v2.css" type="text/css" />
    <link rel="stylesheet" href="CSS/font.css" type="text/css" cache="false" />
    <link rel="stylesheet" href="js/calendar/bootstrap_calendar.css" type="text/css" cache="false" />
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--[if lt IE 9]>
    <script src="js/ie/html5shiv.js" cache="false"></script>
    <script src="js/ie/respond.min.js" cache="false"></script>
    <script src="js/ie/excanvas.js" cache="false"></script> <![endif]-->
</head>

<body>
    <section class="vbox">
        <header class="bg-dark dk header navbar navbar-fixed-top-xs">
            <div class="navbar-header aside-md">
                <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen" data-target="#nav">
                    <i class="fa fa-bars"></i>
                </a>
                <a href="index.html" class="navbar-brand" data-toggle="fullscreen">
                    HMS
                </a>
                <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".nav-user">
                    <i class="fa fa-cog"></i>
                </a>
            </div>

            <ul class="nav navbar-nav navbar-right hidden-xs nav-user">
                <li class="hidden-xs">

                    <section class="dropdown-menu aside-xl">
                        <section class="panel bg-white">

                            <div class="list-group list-group-alt animated fadeInRight">
                                <a href="#" class="media list-group-item">
                                    <span class="pull-left thumb-sm"> 
                                        <img src="images/avatar.jpg" alt="John said" class="img-circle"> 
                                    </span>
                                    <span class="media-body block m-b-none"> Use awesome animate.css<br> <small class="text-muted">10 minutes ago</small> 
                                    </span>
                                </a>
                                <a href="#" class="media list-group-item">
                                    <span class="media-body block m-b-none"> 1.0 initial released<br> <small class="text-muted">1 hour ago</small> 
                                    </span>
                                </a>
                            </div>
                            <footer class="panel-footer text-sm">
                                <a href="#" class="pull-right">
                                    <i class="fa fa-cog"></i>
                                </a>
                                <a href="#notes" data-toggle="class:show animated fadeInRight">See all the notifications
                                </a>
                            </footer>
                        </section>
                    </section>
                </li>
                <li class="dropdown hidden-xs">

                    <section class="dropdown-menu aside-xl animated fadeInUp">
                        <section class="panel bg-white">
                            <form role="search">
                                <div class="form-group wrapper m-b-none">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Search">
                                        <span class="input-group-btn"> 
                                                <button type="submit" class="btn btn-info btn-icon">
                                                    <i class="fa fa-search"></i>
                                                </button> 
                                            </span>
                                    </div>
                                </div>
                            </form>
                        </section>
                    </section>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 
                        Admin
                    </a>

                </li>
            </ul>
        </header>
        <section>
            <section class="hbox stretch">
                <!-- .aside -->
                <aside class="bg-dark lter aside-md hidden-print" id="nav">
                    <section class="vbox">

                        <section class="w-f scrollable">
                            <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="5px" data-color="#333333">
                                <!-- nav -->
                                <nav class="nav-primary hidden-xs">
                                    <ul class="nav">
                                        <li class="active">
                                            <a href="/src/AdminDashboard.html" class="active">
                                                <i class="fa fa-dashboard icon"> 
                                                <b class="bg-danger"></b> 
                                            </i>
                                                <span>Dashboard</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#layout">
                                                <i class="fa fa-columns icon"> 
                                                <b class="bg-warning"></b>
                                            </i>
                                                <span class="pull-right"> 
                                                <i class="fa fa-angle-down text"></i> 
                                                <i class="fa fa-angle-up text-active"></i> 
                                            </span>
                                                <span>Room Details</span>
                                            </a>
                                            <ul class="nav lt">
                                                <li>
                                                    <a href="/src/roomDetails/addRoomDetails.html"> <i class="fa fa-angle-right"></i> <span>New Details</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/src/roomDetails/viewRoomDetails.html"> <i class="fa fa-angle-right"></i> <span>View Details</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#pages">
                                                <i class="fa fa-file-text icon"> 
                                                <b class="bg-primary"></b>
                                            </i>
                                                <span class="pull-right"> 
                                                    <i class="fa fa-angle-down text"></i> 
                                                    <i class="fa fa-angle-up text-active"></i> 
                                            </span>
                                                <span>Employee Details</span>
                                            </a>
                                            <ul class="nav lt">
                                                <li>
                                                    <a href="/src/employees/addEmployees.html"> <i class="fa fa-angle-right"></i> <span>New Employee</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/src/employees/viewEmployees.html"> <i class="fa fa-angle-right"></i> <span>View Employees</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>
										<li>
                                            <a href="#pages">
                                                <i class="fa fa-file-text icon"> 
                                                <b class="bg-primary"></b>
                                            </i>
                                                <span class="pull-right"> 
                                                    <i class="fa fa-angle-down text"></i> 
                                                    <i class="fa fa-angle-up text-active"></i> 
                                            </span>
                                                <span>Doctors Details</span>
                                            </a>
                                            <ul class="nav lt">
                                                 <li>
                                                    <a href="/src/employees/viewEmployees.html"> <i class="fa fa-angle-right"></i> <span>View Doctors</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>
										<li>
                                            <a href="#layout">
                                                <i class="fa fa-columns icon"> 
                                                <b class="bg-warning"></b>
                                            </i>
                                                <span class="pull-right"> 
                                                <i class="fa fa-angle-down text"></i> 
                                                <i class="fa fa-angle-up text-active"></i> 
                                            </span>
                                                <span>Attendance</span>
                                            </a>
                                            <ul class="nav lt">
                                                <li>
                                                    <a href="/src/Employees/markAttendance.html"> <i class="fa fa-angle-right"></i> <span>Mark Attendance</span>
                                                    </a>
                                                </li>
												<li>
                                                    <a href="/src/Attendance/viewAttendence.html"> <i class="fa fa-angle-right"></i> <span>view attendance</span>
                                                    </a>
                                                </li>
                                       
                                       


                                    </ul>
                                </nav>
                                <!-- / nav -->
                            </div>
                        </section>
                        <footer class="footer lt hidden-xs b-t b-dark">
                            <b>HMS<br>Copyright &copy 2018</b>
                        </footer>
                    </section>
                </aside>
                <!-- /.aside -->

                <!--Contents-->
                <section id="content">
                    <section class="vbox">
                        <section class="scrollable padder">
                            <section class="panel panel-default">
                                <header class="panel-heading">
                                <h3 class="m-b-none">View Employee Details</h3>
                            </header>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped b-t b-light text-sm" id="secondTable">
        
                                <thead>
                                    <tr>
                                            <th class="th-sortable" data-toggle="class">ID
                                                    <span class="th-sort"> 
                                                        <i class="fa fa-sort-down text"></i> 
                                                        <i class="fa fa-sort-up text-active"></i>
                                                         <i class="fa fa-sort"></i> 
                                                    </span>
                                                </th>
                                   
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Email-id</th>
                                        <th>Gender</th>
                                        <th>Phone</th>
                                        <th>Designation</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(row, i) in rows" :value="i" selected="">
                                        <td>{{row.id}}&nbsp; &nbsp; &nbsp;</td>
                                        <td>{{row.firstName}}&nbsp; &nbsp; &nbsp;</td>
                                        <td>{{row.lastName}}&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;</td>
                                        <td>{{row.emailId}}&nbsp; &nbsp; &nbsp;</td>
                                        <td>{{row.gender}}&nbsp; &nbsp; &nbsp;</td>
                                        <td>{{row.primaryNumber}}&nbsp; &nbsp; &nbsp;</td>


                                        <td>{{row.designation}}&nbsp; &nbsp; &nbsp;</td>
                                        <td><button id="" @click="updateTableRow(row.id)">Update</button>&nbsp; &nbsp; &nbsp;</td>
                                        <td><button @click="deleteRow(row.id)">Delete</button></td>
                                        
                                        <td><button v-if="row.type" @click="addSpecialization(row.id)">Specialization</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>
                    </section>
                    <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>
                </section>
                <!--/Contents-->


                <aside class="bg-light lter b-l aside-md hide" id="notes">
                    <div class="wrapper">Notification</div>
                </aside>
            </section>
        </section>
    </section>



    <!--Scripts for better working-->
    <script src="js/app.v2.js"></script>
    <!-- Bootstrap -->
    <!-- App -->
    <script src="js/charts/easypiechart/jquery.easy-pie-chart.js" cache="false"></script>
    <script src="js/charts/sparkline/jquery.sparkline.min.js" cache="false"></script>
    <script src="js/charts/flot/jquery.flot.min.js" cache="false"></script>
    <script src="js/charts/flot/jquery.flot.tooltip.min.js" cache="false"></script>
    <script src="js/charts/flot/jquery.flot.resize.js" cache="false"></script>
    <script src="js/charts/flot/jquery.flot.grow.js" cache="false"></script>
    <script src="js/charts/flot/demo.js" cache="false"></script>
    <script src="js/calendar/bootstrap_calendar.js" cache="false"></script>
    <script src="js/calendar/demo.js" cache="false"></script>
    <script src="js/sortable/jquery.sortable.js" cache="false"></script>
    <script>
        var secondTable = new Vue({
            el: '#secondTable',
            data: {
                rows: [{
                        firstName: '',
                        lastName: '',
                        emailId: '',
                        gender: '',
                        primayNumber: '',
                        password: '',
                        designation: '',
                        dateOfBirth: '',
                        type: ''
                    }

                ],
                id: '',
                selected: ''
            },
            computed: {
                "columns": function columns() {
                    if (this.rows.length == 0) {
                        console.log(row.item)
                        return [];
                    }
                    return Object.keys(this.rows[0])
                }
            },
            created() {
                axios.get('http://localhost:8080/employees')
                    .then(response => {
                        this.rows = response.data
                        for (let i = 0; i < this.rows.length; i++) {
                            if (this.rows[i].designation == 'Doctor') {
                                this.rows[i].type = true;
                            }

                        }
                        console.log(this.rows)
                    })
                    .catch(error => {
                        console.log(error)
                    })
            },
            methods: {
                updateTableRow: function(idx) {
                    // console.log(idx)
                    localStorage.setItem('empId', idx);
                    emp = localStorage['empId'];
                    console.log(emp)
                    window.location.href = "/src/employees/updateEmployee.html";
                },

                deleteRow: function(idx) {
                    axios.delete('http://localhost:8080/employees/' + idx)
                        .then(res => {
                            console.log(res)
                            window.alert('data deleted successfully...')
                            location.reload()
                        })
                        .catch(err => {
                            console.log(err)
                        })
                },
                getDoctors: function(empid) {
                    axios.get('http://localhost:8080/doctors')
                        .then(response => {
                            this.rows = response.data
                            console.log(this.rows)
                                //  var empid = localStorage['empId'];
                            for (let i = 0; i < this.rows.length; i++) {
                                            if (this.rows[i].employee.id == empid) {
												x=1;											
												break;                                              
											}
                                        }
										if(x==1)
										{
										window.alert("Data has already been entered"); 
 location.reload()										
										}
										else{
										window.location.href = "/src/doctors/addDoctor.html";   
										}
                        })
                },
                addSpecialization: function(id) {
                    localStorage.setItem('empId', id);;
                    this.getDoctors(id);
                }

            }

        })
    </script>
</body>

</html>